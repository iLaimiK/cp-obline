import{b as t,a3 as s,o as e,a as i,w as o,d as a,z as n,J as r,n as l,r as p,p as h,i as c,q as u,e as d,t as m,f,F as k,g,h as b,l as y}from"./index-DZYRYWK8.js";import{_ as C}from"./uni-icons.DjJVVxUr.js";import{r as w}from"./uni-app.es.DbCdGPBd.js";import{a as x,b as _}from"./uni-list.BRIuYMJs.js";import{_ as T}from"./uni-transition.C0IM8O_c.js";import{_ as P}from"./_plugin-vue_export-helper.BCo6x5W8.js";const R=P({name:"uniPopup",components:{keypress:{name:"Keypress",props:{disable:{type:Boolean,default:!1}},mounted(){const t={esc:["Esc","Escape"],tab:"Tab",enter:"Enter",space:[" ","Spacebar"],up:["Up","ArrowUp"],left:["Left","ArrowLeft"],right:["Right","ArrowRight"],down:["Down","ArrowDown"],delete:["Backspace","Delete","Del"]};document.addEventListener("keyup",(s=>{if(this.disable)return;const e=Object.keys(t).find((e=>{const i=s.key,o=t[e];return o===i||Array.isArray(o)&&o.includes(i)}));e&&setTimeout((()=>{this.$emit(e,{})}),0)}))},render:()=>{}}},emits:["change","maskClick"],props:{animation:{type:Boolean,default:!0},type:{type:String,default:"center"},isMaskClick:{type:Boolean,default:null},maskClick:{type:Boolean,default:null},backgroundColor:{type:String,default:"none"},safeArea:{type:Boolean,default:!0},maskBackgroundColor:{type:String,default:"rgba(0, 0, 0, 0.4)"},borderRadius:{type:String}},watch:{type:{handler:function(t){this.config[t]&&this[this.config[t]](!0)},immediate:!0},isDesktop:{handler:function(t){this.config[t]&&this[this.config[this.type]](!0)},immediate:!0},maskClick:{handler:function(t){this.mkclick=t},immediate:!0},isMaskClick:{handler:function(t){this.mkclick=t},immediate:!0},showPopup(t){document.getElementsByTagName("body")[0].style.overflow=t?"hidden":"visible"}},data(){return{duration:300,ani:[],showPopup:!1,showTrans:!1,popupWidth:0,popupHeight:0,config:{top:"top",bottom:"bottom",center:"center",left:"left",right:"right",message:"top",dialog:"center",share:"bottom"},maskClass:{position:"fixed",bottom:0,top:0,left:0,right:0,backgroundColor:"rgba(0, 0, 0, 0.4)"},transClass:{backgroundColor:"transparent",borderRadius:this.borderRadius||"0",position:"fixed",left:0,right:0},maskShow:!0,mkclick:!0,popupstyle:"top"}},computed:{getStyles(){let t={backgroundColor:this.bg};return this.borderRadius,t=Object.assign(t,{borderRadius:this.borderRadius}),t},isDesktop(){return this.popupWidth>=500&&this.popupHeight>=500},bg(){return""===this.backgroundColor||"none"===this.backgroundColor?"transparent":this.backgroundColor}},mounted(){(()=>{const{windowWidth:t,windowHeight:s,windowTop:e,safeArea:i,screenHeight:o,safeAreaInsets:a}=h();this.popupWidth=t,this.popupHeight=s+(e||0),i&&this.safeArea?this.safeAreaInsets=a.bottom:this.safeAreaInsets=0})()},unmounted(){this.setH5Visible()},activated(){this.setH5Visible(!this.showPopup)},deactivated(){this.setH5Visible(!0)},created(){null===this.isMaskClick&&null===this.maskClick?this.mkclick=!0:this.mkclick=null!==this.isMaskClick?this.isMaskClick:this.maskClick,this.animation?this.duration=300:this.duration=0,this.messageChild=null,this.clearPropagation=!1,this.maskClass.backgroundColor=this.maskBackgroundColor},methods:{setH5Visible(t=!0){document.getElementsByTagName("body")[0].style.overflow=t?"visible":"hidden"},closeMask(){this.maskShow=!1},disableMask(){this.mkclick=!1},clear(t){t.stopPropagation(),this.clearPropagation=!0},open(t){if(this.showPopup)return;t&&-1!==["top","center","bottom","left","right","message","dialog","share"].indexOf(t)||(t=this.type),this.config[t]?(this[this.config[t]](),this.$emit("change",{show:!0,type:t})):console.error("缺少类型：",t)},close(t){this.showTrans=!1,this.$emit("change",{show:!1,type:this.type}),clearTimeout(this.timer),this.timer=setTimeout((()=>{this.showPopup=!1}),300)},touchstart(){this.clearPropagation=!1},onTap(){this.clearPropagation?this.clearPropagation=!1:(this.$emit("maskClick"),this.mkclick&&this.close())},top(t){this.popupstyle=this.isDesktop?"fixforpc-top":"top",this.ani=["slide-top"],this.transClass={position:"fixed",left:0,right:0,backgroundColor:this.bg,borderRadius:this.borderRadius||"0"},t||(this.showPopup=!0,this.showTrans=!0,this.$nextTick((()=>{this.messageChild&&"message"===this.type&&this.messageChild.timerClose()})))},bottom(t){this.popupstyle="bottom",this.ani=["slide-bottom"],this.transClass={position:"fixed",left:0,right:0,bottom:0,paddingBottom:this.safeAreaInsets+"px",backgroundColor:this.bg,borderRadius:this.borderRadius||"0"},t||(this.showPopup=!0,this.showTrans=!0)},center(t){this.popupstyle="center",this.ani=["zoom-out","fade"],this.transClass={position:"fixed",display:"flex",flexDirection:"column",bottom:0,left:0,right:0,top:0,justifyContent:"center",alignItems:"center",borderRadius:this.borderRadius||"0"},t||(this.showPopup=!0,this.showTrans=!0)},left(t){this.popupstyle="left",this.ani=["slide-left"],this.transClass={position:"fixed",left:0,bottom:0,top:0,backgroundColor:this.bg,borderRadius:this.borderRadius||"0",display:"flex",flexDirection:"column"},t||(this.showPopup=!0,this.showTrans=!0)},right(t){this.popupstyle="right",this.ani=["slide-right"],this.transClass={position:"fixed",bottom:0,right:0,top:0,backgroundColor:this.bg,borderRadius:this.borderRadius||"0",display:"flex",flexDirection:"column"},t||(this.showPopup=!0,this.showTrans=!0)}}},[["render",function(h,u,d,m,f,k){const g=w(t("uni-transition"),T),b=c,y=s("keypress");return f.showPopup?(e(),i(b,{key:0,class:r(["uni-popup",[f.popupstyle,k.isDesktop?"fixforpc-z-index":""]])},{default:o((()=>[a(b,{onTouchstart:k.touchstart},{default:o((()=>[f.maskShow?(e(),i(g,{key:"1",name:"mask","mode-class":"fade",styles:f.maskClass,duration:f.duration,show:f.showTrans,onClick:k.onTap},null,8,["styles","duration","show","onClick"])):n("",!0),a(g,{key:"2","mode-class":f.ani,name:"content",styles:f.transClass,duration:f.duration,show:f.showTrans,onClick:k.onTap},{default:o((()=>[a(b,{class:r(["uni-popup__wrapper",[f.popupstyle]]),style:l(k.getStyles),onClick:k.clear},{default:o((()=>[p(h.$slots,"default",{},void 0,!0)])),_:3},8,["style","class","onClick"])])),_:3},8,["mode-class","styles","duration","show","onClick"])])),_:3},8,["onTouchstart"]),f.maskShow?(e(),i(y,{key:0,onEsc:k.onTap},null,8,["onEsc"])):n("",!0)])),_:3},8,["class"])):n("",!0)}],["__scopeId","data-v-f0b957f8"]]),v={name:"custom-payment"},A=P(Object.assign(v,{props:{orderId:{type:String,default:""},amount:{type:[String,Number],default:0}},emits:["close","confirm","change"],setup(s,{expose:n,emit:r}){const l=s,p=u(0),h=[{title:"微信支付",thumb:"/static/images/wechatpay-icon.png"},{title:"支付宝支付",thumb:"/static/images/alipay-icon.png"}];const T=u();const P=r;return n({openPopup:function(){T.value.open()},closePopup:function(){T.value.close()}}),(s,n)=>{const r=b,u=w(t("uni-icons"),C),v=c,A=w(t("uni-list-item"),x),S=w(t("uni-list"),_),B=y,D=w(t("uni-popup"),R);return e(),i(D,{"is-mask-click":!1,ref_key:"popup",ref:T,type:"bottom"},{default:o((()=>[a(v,{class:"payment-container"},{default:o((()=>[a(v,{class:"payment-header"},{default:o((()=>[a(r,{class:"title"},{default:o((()=>[d("选择支付方式")])),_:1}),a(u,{onClick:n[0]||(n[0]=t=>s.$emit("close")),class:"uni-icons-close",size:"18",color:"#333",type:"closeempty"})])),_:1}),a(v,{class:"order-amount"},{default:o((()=>[d("¥ "+m(l.amount.toFixed(2))+"元",1)])),_:1}),a(S,{border:!1},{default:o((()=>[(e(),f(k,null,g(h,((t,s)=>a(A,{clickable:"",onClick:t=>function(t){p.value=t,P("change",{index:t})}(s),key:t.title,title:t.title,thumb:t.thumb},{footer:o((()=>[p.value===s?(e(),i(u,{key:0,size:"26",color:"#16C2A3",type:"checkbox-filled"})):(e(),i(u,{key:1,size:"26",color:"#d1d1d1",type:"circle"}))])),_:2},1032,["onClick","title","thumb"]))),64))])),_:1}),a(B,{onClick:n[1]||(n[1]=t=>s.$emit("confirm",{index:p.value})),class:"uni-button"},{default:o((()=>[d(" 立即支付 ")])),_:1})])),_:1})])),_:1},512)}}}),[["__scopeId","data-v-2ab91a3b"]]);export{A as _};

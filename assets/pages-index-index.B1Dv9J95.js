import{c as e,o as s,a,w as l,r as t,n as c,i as o,b as r,d as u,e as n,f as i,F as d,g as f,t as p,h as _,j as v,k as m,l as y,S as k,m as g,p as b,q as h,u as q,I as w,s as x,v as j,x as C,y as T,z as N}from"./index-DZYRYWK8.js";import{_ as F}from"./uni-icons.DjJVVxUr.js";import{r as S}from"./uni-app.es.DbCdGPBd.js";import{_ as I}from"./custom-tabs.B9ZJDOIx.js";import{_ as M}from"./_plugin-vue_export-helper.BCo6x5W8.js";import{_ as A}from"./scroll-page.Bb0n_poV.js";import{f as Z,a as z,d as B}from"./doctor.DYVWaUUb.js";import"./http.BtQMKx8L.js";const J=M({__name:"custom-sticky",props:{offsetTop:{type:[String,Number],default:0},backgroundColor:{type:String,default:"#fff"}},setup(r){const u=r,n=e((()=>({paddingTop:u.offsetTop,backgroundColor:u.backgroundColor})));return(e,r)=>{const u=o;return s(),a(u,{style:c(n.value),class:"custom-sticky"},{default:l((()=>[t(e.$slots,"default",{},void 0,!0)])),_:3},8,["style"])}}},[["__scopeId","data-v-55446716"]]),P=M({__name:"doctor-list",props:{list:Array},setup:e=>(t,c)=>{const g=_,b=v,h=S(r("uni-icons"),F),q=o,w=m,x=y,j=k;return s(),a(q,{class:"doctor-list"},{default:l((()=>[u(q,{class:"doctor-list-header"},{default:l((()=>[u(g,{class:"title"},{default:l((()=>[n("推荐关注")])),_:1}),u(b,{"hover-class":"none",url:" ",class:"more"},{default:l((()=>[n("查看更多")])),_:1}),u(h,{color:"#c3c3c5",type:"forward"})])),_:1}),u(j,{"scroll-x":"","show-scrollbar":!1},{default:l((()=>[u(q,{class:"doctor-list-wrapper"},{default:l((()=>[(s(!0),i(d,null,f(e.list,((e,t)=>(s(),a(q,{class:"doctor-list-item",key:e.id},{default:l((()=>[u(w,{class:"doctor-avatar",src:e.avatar},null,8,["src"]),u(q,{class:"name"},{default:l((()=>[n(p(e.name),1)])),_:2},1024),u(q,{class:"unit"},{default:l((()=>[n(p(e.hospitalName)+" "+p(e.depName),1)])),_:2},1024),u(q,{class:"level"},{default:l((()=>[n(p(e.positionalTitles),1)])),_:2},1024),1===e.likeFlag?(s(),a(x,{key:0,class:"follow"},{default:l((()=>[n("已关注")])),_:1})):(s(),a(x,{key:1,onClick:s=>async function(e){const s=await Z(e.id);if(1e4!==s.code)return uni.utils.toast(s.message);e.likeFlag=1}(e),class:"follow"},{default:l((()=>[n("+ 关注")])),_:2},1032,["onClick"]))])),_:2},1024)))),128))])),_:1})])),_:1})])),_:1})}},[["__scopeId","data-v-69749b12"]]),U=M({__name:"feed-lists",props:{list:Array},setup(e){g((()=>{console.log("mounted...")}));const t=e;return(e,c)=>{const r=m,v=_,k=o,g=y;return s(),a(k,{class:"feed-list"},{default:l((()=>[(s(!0),i(d,null,f(t.list,((e,t)=>(s(),a(k,{class:"feed-list-item",key:e.id},{default:l((()=>[u(k,{class:"feed-meta"},{default:l((()=>[u(r,{class:"doctor-avatar",src:e.creatorAvatar},null,8,["src"]),u(k,{class:"doctor-info"},{default:l((()=>[u(v,{class:"name"},{default:l((()=>[n(p(e.creatorName),1)])),_:2},1024),u(v,{class:"desc"},{default:l((()=>[n(p(e.creatorHospatalName)+" "+p(e.creatorDep)+" "+p(e.creatorTitles),1)])),_:2},1024)])),_:2},1024),u(g,{class:"doctor-button",plain:""},{default:l((()=>[n("+ 关注")])),_:1})])),_:2},1024),u(k,{class:"feed-topic"},{default:l((()=>[n(p(e.title),1)])),_:2},1024),u(k,{class:"feed-relation"},{default:l((()=>[n("# "+p(e.topic),1)])),_:2},1024),u(k,{class:"feed-content"},{default:l((()=>[u(k,{class:"text"},{default:l((()=>[n(p(e.content),1)])),_:2},1024),u(k,{class:"picture"},{default:l((()=>[(s(!0),i(d,null,f(e.coverUrl,(e=>(s(),a(r,{mode:"aspectFill",class:"uni-image",src:e},null,8,["src"])))),256))])),_:2},1024)])),_:2},1024),u(k,{class:"feed-extra"},{default:l((()=>[u(v,null,{default:l((()=>[n(p(e.collectionNumber)+" 收藏",1)])),_:2},1024),u(v,null,{default:l((()=>[n(p(e.commentNumber)+" 评论",1)])),_:2},1024)])),_:2},1024)])),_:2},1024)))),128))])),_:1})}}},[["__scopeId","data-v-e13314db"]]),D=M({__name:"index",setup(t){const{safeAreaInsets:p}=b(),y=h(0),k=h([{label:"推荐",type:"recommend",current:1,hasMore:!0,list:[],rendered:!0},{label:"关注",type:"like",current:1,hasMore:!0,list:[],rendered:!1},{label:"减脂",type:"fatReduction",current:1,hasMore:!0,list:[],rendered:!1},{label:"饮食",type:"food",current:1,hasMore:!0,list:[],rendered:!1}]),M=e((()=>k.value[y.value])),Z=h(5);function D({index:e}){y.value=e,k.value[y.value].rendered||L(),k.value[y.value].rendered=!0}async function L(){const{type:e,current:s}=M.value,a=await z({type:e,current:s,pageSize:Z.value});if(1e4!==a.code)return uni.utils.toast(a.message);a.data.rows.forEach((e=>{e.content=e.content.replace(/<[^>]+>/g,"")}));const l=k.value[y.value].list;k.value[y.value].list=[...l,...a.data.rows];const t=k.value[y.value].current;k.value[y.value].current=t+1,k.value[y.value].hasMore=t+1<=a.data.pageTotal}let Q=null;function V(){k.value[y.value].hasMore&&(Q&&clearTimeout(Q),Q=setTimeout((()=>{L()}),500))}const W=h([]);return g((()=>{L(),async function(){const e=await B();if(1e4!==e.code)return uni.utils.toast(e.message);W.value=e.data.rows}()})),(e,t)=>{const g=o,b=w,h=S(r("uni-icons"),F),M=m,Z=_,z=v,B=x,L=j,Q=S(r("custom-tabs"),I),Y=S(r("custom-sticky"),J),E=S(r("scroll-page"),A);return s(),a(E,{onScrolltolower:V},{default:l((()=>[u(g,{class:"index-page",style:c({backgroundPositionY:-48+q(p).top+"px"})},{default:l((()=>[u(g,{style:c({paddingTop:q(p).top+"px"}),class:"page-navbar"},{default:l((()=>[n("优医")])),_:1},8,["style"]),u(g,{class:"search-bar"},{default:l((()=>[u(b,{"placeholder-class":"input-placeholder",placeholder:"搜一搜: 疾病/症状/医生/健康知识",class:"input",type:"text"}),u(g,{class:"icon-search"},{default:l((()=>[u(h,{size:"22",color:"#C3C3C5",type:"search"})])),_:1})])),_:1}),u(g,{class:"quick-entry"},{default:l((()=>[u(z,{"hover-class":"none",class:"quick-entry-item",url:"/subpkg_consult/quickly/index?type=2"},{default:l((()=>[u(M,{class:"quick-entry-icon",src:"/assets/quick-entry-1-Coj-07yh.png"}),u(Z,{class:"label"},{default:l((()=>[n("问医生")])),_:1}),u(Z,{class:"small"},{default:l((()=>[n("按科室查问医生")])),_:1})])),_:1}),u(z,{"hover-class":"none",class:"quick-entry-item",url:"/subpkg_consult/quickly/index?type=2"},{default:l((()=>[u(M,{class:"quick-entry-icon",src:"/assets/quick-entry-2-BtJJfb5v.png"}),u(Z,{class:"label"},{default:l((()=>[n("极速问诊")])),_:1}),u(Z,{class:"small"},{default:l((()=>[n("20s医生极速回复")])),_:1})])),_:1}),u(z,{"hover-class":"none",class:"quick-entry-item",url:"/subpkg_consult/quickly/index?type=2"},{default:l((()=>[u(M,{class:"quick-entry-icon",src:"/assets/quick-entry-3-BZN_1psj.png"}),u(Z,{class:"label"},{default:l((()=>[n("开药门诊")])),_:1}),u(Z,{class:"small"},{default:l((()=>[n("线上买药更方便")])),_:1})])),_:1})])),_:1}),u(g,{class:"quick-view"},{default:l((()=>[u(z,{"hover-class":"none",class:"quick-view-item",url:"/subpkg_medicine/order_list/index"},{default:l((()=>[u(M,{class:"quick-view-icon",src:"/assets/quick-view-1-CaLDmwrU.png"}),u(Z,{class:"label"},{default:l((()=>[n("药品订单")])),_:1})])),_:1}),u(z,{"hover-class":"none",class:"quick-view-item",url:"/subpkg_archive/list/index"},{default:l((()=>[u(M,{class:"quick-view-icon",src:"/assets/quick-view-2-BZ56QPgU.png"}),u(Z,{class:"label"},{default:l((()=>[n("健康档案")])),_:1})])),_:1}),u(z,{"hover-class":"none",class:"quick-view-item"},{default:l((()=>[u(M,{class:"quick-view-icon",src:"/assets/quick-view-3-FFkrcFPJ.png"}),u(Z,{class:"label"},{default:l((()=>[n("我的处方")])),_:1})])),_:1}),u(z,{"hover-class":"none",class:"quick-view-item"},{default:l((()=>[u(M,{class:"quick-view-icon",src:"/assets/quick-view-4-NoQqxaLY.png"}),u(Z,{class:"label"},{default:l((()=>[n("疾病查询")])),_:1})])),_:1})])),_:1}),u(g,{class:"banner-placeholder"},{default:l((()=>[u(L,{class:"uni-swiper","indicator-dots":"","indicator-color":"#ffffff99","indicator-active-color":"#fff",circular:""},{default:l((()=>[u(B,null,{default:l((()=>[u(z,{"hover-class":"none",class:"navigator",url:" "},{default:l((()=>[u(M,{class:"banner-image",src:"/assets/banner-1-ZVtSvbcW.png"})])),_:1})])),_:1}),u(B,null,{default:l((()=>[u(z,{"hover-class":"none",class:"navigator",url:" "},{default:l((()=>[u(M,{class:"banner-image",src:"/assets/banner-1-ZVtSvbcW.png",mode:"aspectFill"})])),_:1})])),_:1})])),_:1})])),_:1}),u(g,{class:"doctor-feeds",style:c({marginTop:-q(p).top+"px"})},{default:l((()=>[u(Y,{"offset-top":q(p).top+"px"},{default:l((()=>[u(Q,{onClick:D,list:k.value},null,8,["list"])])),_:1},8,["offset-top"]),(s(!0),i(d,null,f(k.value,((e,t)=>C((s(),a(g,{key:e.type},{default:l((()=>[u(g,null,{default:l((()=>[C(u(P,{list:W.value},null,8,["list"]),[[T,"recommend"===e.type]])])),_:2},1024),e.rendered?(s(),a(U,{key:0,list:e.list},null,8,["list"])):N("",!0)])),_:2},1024)),[[T,y.value===t]]))),128))])),_:1},8,["style"])])),_:1},8,["style"])])),_:1})}}},[["__scopeId","data-v-d67a5622"]]);export{D as default};

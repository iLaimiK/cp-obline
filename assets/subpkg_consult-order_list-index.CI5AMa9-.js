import{_ as t}from"./custom-tabs.DIeNnGsZ.js";import{q as e,m as s,b as a,o as l,a as u,w as o,d as r,f as n,F as i,g as c,e as d,t as f,z as _,k as m,h as p,i as y,j as v,l as b,S as g,x as h,y as k}from"./index-nfqmuTx8.js";import{r as x}from"./uni-app.es.l2AdP1v2.js";import{a as j,b as w}from"./uni-list.D_TZQXpp.js";import{_ as C}from"./uni-transition.CV8Ul4sA.js";import{_ as I}from"./uni-load-more.DqsB8xz1.js";import{o as z}from"./consult.2p_hcPN0.js";import{d as S}from"./fn.Db8hUwGN.js";import{_ as q}from"./_plugin-vue_export-helper.BCo6x5W8.js";import"./uni-icons.CVREZnA1.js";import"./http.BKV-_WDr.js";const F=q({__name:"order-list",props:{type:{type:Number,default:1}},setup(t){const h=t,k=e(1),q=e([]),F=e("loading"),T=e(!1),$=S((async()=>{F.value="loading";const t=await z({type:h.type,current:k.value,pageSize:5});if(1e4!==t.code)return uni.utils.toast(t.message);q.value=[...q.value,...t.data.rows],k.value++,t.data.pageTotal>=k.value?F.value="more":F.value="noMore"})),D=e(!1),M=async()=>{k.value=1,q.value=[],D.value=!0,await $(),D.value=!1},N=async()=>{"more"===F.value&&await $()};function R(){T.value=!T.value}return s((()=>{$()})),(t,e)=>{const s=m,h=p,k=y,z=x(a("uni-list-item"),j),S=x(a("uni-list"),w),$=v,V=b,A=x(a("uni-transition"),C),B=x(a("uni-load-more"),I),E=g;return l(),u(E,{"refresher-enabled":"","refresher-triggered":D.value,onRefresherrefresh:M,onScrolltolower:N,"refresher-background":"#f6f6f6",class:"uni-scroll-view","scroll-y":""},{default:o((()=>[r(k,{class:"consult-list"},{default:o((()=>[(l(!0),n(i,null,c(q.value,((t,e)=>(l(),u(k,{key:t.id,class:"consult-list-item"},{default:o((()=>[r(k,{class:"consult-header"},{default:o((()=>[r(k,{class:"label"},{default:o((()=>[r(s,{class:"doctor-avatar",src:t.docInfo.avatar},null,8,["src"]),r(h,null,{default:o((()=>[d(f(t.typeValue)+"（自动分配医生）",1)])),_:2},1024)])),_:2},1024),1===t.status?(l(),u(h,{key:0,class:"status color-1"},{default:o((()=>[d("待支付")])),_:1})):_("",!0),2===t.status?(l(),u(h,{key:1,class:"status color-2"},{default:o((()=>[d("待接诊")])),_:1})):_("",!0),3===t.status?(l(),u(h,{key:2,class:"status color-2"},{default:o((()=>[d("咨询中")])),_:1})):_("",!0),4===t.status?(l(),u(h,{key:3,class:"status color-3"},{default:o((()=>[d("已完成")])),_:1})):_("",!0),5===t.status?(l(),u(h,{key:4,class:"status color-3"},{default:o((()=>[d("已取消")])),_:1})):_("",!0)])),_:2},1024),r($,{class:"consult-body","hover-class":"none",url:`/subpkg_consult/order_detail/index?id=${t.id}`},{default:o((()=>[r(S,{border:!1},{default:o((()=>[r(z,{border:!1,title:"病情描述","right-text":t.illnessDesc},null,8,["right-text"]),r(z,{border:!1,title:"价格","right-text":`¥ ${t.payment}`},null,8,["right-text"]),r(z,{border:!1,title:"创建时间","right-text":t.createTime},null,8,["right-text"])])),_:2},1024)])),_:2},1032,["url"]),1===t.status?(l(),u(k,{key:0,class:"consult-footer"},{default:o((()=>[r(V,{class:"uni-button minor"},{default:o((()=>[d("取消订单")])),_:1}),r(V,{class:"uni-button"},{default:o((()=>[d("继续支付")])),_:1})])),_:1})):_("",!0),2===t.status?(l(),u(k,{key:1,class:"consult-footer"},{default:o((()=>[r(V,{class:"uni-button minor"},{default:o((()=>[d("取消订单")])),_:1}),r(V,{class:"uni-button"},{default:o((()=>[d("继续咨询")])),_:1})])),_:1})):_("",!0),3===t.status?(l(),u(k,{key:2,class:"consult-footer"},{default:o((()=>[r(V,{class:"uni-button"},{default:o((()=>[d("继续咨询")])),_:1})])),_:1})):_("",!0),4===t.status?(l(),u(k,{key:3,class:"consult-footer"},{default:o((()=>[r(k,{onClick:R,class:"uni-button more"},{default:o((()=>[r(h,{class:"label"},{default:o((()=>[d(f(T.value?"收起":"更多"),1)])),_:1}),r(A,{show:T.value},{default:o((()=>[r(k,{class:"list"},{default:o((()=>[r(k,{class:"list-item"},{default:o((()=>[d("查看处方")])),_:1})])),_:1})])),_:1},8,["show"])])),_:1}),r(V,{class:"uni-button minor"},{default:o((()=>[d("问诊记录")])),_:1}),t.evaluateId?(l(),u(V,{key:0,class:"uni-button minor"},{default:o((()=>[d(" 查看评价 ")])),_:1})):(l(),u(V,{key:1,class:"uni-button"},{default:o((()=>[d("去评价")])),_:1}))])),_:2},1024)):_("",!0),5===t.status?(l(),u(k,{key:4,class:"consult-footer"},{default:o((()=>[r(V,{class:"uni-button minor"},{default:o((()=>[d("删除订单")])),_:1}),r(V,{class:"uni-button"},{default:o((()=>[d("咨询其它医生")])),_:1})])),_:1})):_("",!0)])),_:2},1024)))),128)),r(B,{status:F.value,color:"#C3C3C5","icon-size":16,"content-text":{contentdown:"上拉显示更多",contentrefresh:"数据正在加载中",contentnomore:"没有更多数据了"}},null,8,["status"])])),_:1})])),_:1},8,["refresher-triggered"])}}},[["__scopeId","data-v-5f7bb23e"]]),T=q({__name:"index",setup(s){const d=e(0),f=e([{label:"问医生",type:1,rendered:!0},{label:"极速问诊",type:2,rendered:!1},{label:"开药问诊",type:3,rendered:!1}]),m=t=>{d.value=t.index,f.value[t.index].rendered=!0};return(e,s)=>{const p=x(a("custom-tabs"),t),v=y;return l(),u(v,{class:"consult-page"},{default:o((()=>[r(v,{class:"consult-status-tabs"},{default:o((()=>[r(p,{onClick:m,list:f.value},null,8,["list"])])),_:1}),(l(!0),n(i,null,c(f.value,((t,e)=>h((l(),u(v,{key:t.type},{default:o((()=>[t.rendered?(l(),u(F,{key:0,type:t.type},null,8,["type"])):_("",!0)])),_:2},1024)),[[k,d.value===e]]))),128))])),_:1})}}},[["__scopeId","data-v-25f90584"]]);export{T as default};

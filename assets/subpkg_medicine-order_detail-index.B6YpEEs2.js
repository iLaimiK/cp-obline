import{q as t,m as a,b as e,o as s,a as l,w as u,d as o,e as n,t as i,f as r,F as d,z as c,g as f,h as m,i as _,j as p,l as v,J as g,k as h}from"./index-DZYRYWK8.js";import{_ as x}from"./uni-icons.DjJVVxUr.js";import{r as y}from"./uni-app.es.DbCdGPBd.js";import{a as b,b as w}from"./uni-list.BRIuYMJs.js";import{_ as k}from"./uni-notice-bar.CjJam1So.js";import{_ as j}from"./scroll-page.Bb0n_poV.js";import{o as I}from"./medcine.B8vSaKrD.js";import{_ as $}from"./_plugin-vue_export-helper.BCo6x5W8.js";import"./http.BtQMKx8L.js";const S=$({__name:"index",props:{id:String},setup($){const S=$;t({10:"待支付",11:"待发货",12:"待收货",13:"已完成",14:"已取消"});const F=["微信支付","支付宝支付"];function M(t){const a=Math.floor(t/3600),e=Math.floor(t%3600/60),s=Math.floor(t%60);return`${a.toString().padStart(2,"0")}:${e.toString().padStart(2,"0")}:${s.toString().padStart(2,"0")}`}const q=t({}),z=async()=>{const{code:t,data:a,message:e}=await I(S.id);if(1e4!==t)return uni.utils.toast(e);q.value=a,q.value.countdown&&q.value.countdown>0&&setInterval((()=>{q.value.countdown>0?q.value.countdown--:0===q.value.countdown&&C()}),1e3)},C=async()=>{await z()};return a((async()=>{await z()})),(t,a)=>{const I=m,$=_,S=y(e("uni-icons"),x),z=p,C=h,D=y(e("uni-list-item"),b),P=y(e("uni-list"),w),J=y(e("uni-notice-bar"),k),K=v,N=y(e("scroll-page"),j);return s(),l(N,{"background-color":"#f6f6f6"},{default:u((()=>[o($,{class:"medicine-page"},{default:u((()=>[o($,{class:"page-header"},{default:u((()=>[o($,{class:"order-status"},{default:u((()=>[o(I,{class:"label"},{default:u((()=>[n("药品订单 "+i(q.value.actualPayment)+"元",1)])),_:1}),o(I,{class:"status"},{default:u((()=>[n(i(q.value.statusValue),1)])),_:1})])),_:1}),10!==q.value.status&&14!==q.value.status?(s(),l($,{key:0,class:"order-shippment"},{default:u((()=>[11===q.value.status?(s(),r(d,{key:0},[o($,{class:"region"},{default:u((()=>[o(I,{class:"iconfont icon-location"}),n(" "+i(q.value.addressInfo.province)+" "+i(q.value.addressInfo.city)+" "+i(q.value.addressInfo.county),1)])),_:1}),o($,{class:"detail"},{default:u((()=>[n(i(q.value.addressInfo.addressDetail),1)])),_:1}),o($,{class:"receiver"},{default:u((()=>[n(i(q.value.addressInfo.receiver)+" "+i(q.value.addressInfo.mobile),1)])),_:1})],64)):c("",!0),12===q.value.status?(s(),l(z,{key:1,url:`/subpkg_medicine/timeline/index?id=${q.value.id}`,"hover-class":"none"},{default:u((()=>[o($,{class:"marker"},{default:u((()=>[n(i(q.value.expressInfo.content),1)])),_:1}),o($,{class:"datetime"},{default:u((()=>[n(i(q.value.expressInfo.time),1)])),_:1}),o($,{class:"arrow"},{default:u((()=>[o(S,{size:"18",color:"#C3C3C5",type:"forward"})])),_:1})])),_:1},8,["url"])):c("",!0)])),_:1})):c("",!0)])),_:1}),o($,{class:"order-shop"},{default:u((()=>[n(" 优医药房 "),o(I,{class:"alt"},{default:u((()=>[n("优医质保 假一赔十")])),_:1})])),_:1}),o($,{class:"medicine-list"},{default:u((()=>[(s(!0),r(d,null,f(q.value.medicines,((t,a)=>(s(),l($,{key:t.id,class:"medicine-list-item"},{default:u((()=>[o(C,{class:"medicine-cover",src:t.avatar,mode:"aspectFill"},null,8,["src"]),o($,{class:"medicine-info"},{default:u((()=>[o(I,{class:"name"},{default:u((()=>[n(i(t.name),1)])),_:2},1024),o(I,{class:g([{symbol:1===t.prescriptionFlag},"unit"])},{default:u((()=>[n(i(t.specs),1)])),_:2},1032,["class"]),o(I,{class:"price"},{default:u((()=>[n("¥"+i(t.amount),1)])),_:2},1024)])),_:2},1024),o($,{class:"quantity"},{default:u((()=>[n("x"+i(t.quantity),1)])),_:2},1024),o($,{class:"guide"},{default:u((()=>[n("用法用量："+i(t.usageDosag),1)])),_:2},1024)])),_:2},1024)))),128))])),_:1}),o($,{class:"order-info"},{default:u((()=>[o(P,{border:!1},{default:u((()=>[o(D,{title:"药品金额","right-text":`¥${q.value.payment}`},null,8,["right-text"]),o(D,{title:"运费","right-text":`¥${q.value.expressFee}`},null,8,["right-text"]),o(D,{title:"优惠券","show-arrow":"","right-text":`-¥${q.value.couponDeduction}`},null,8,["right-text"]),o(D,{title:"实付款","right-text":`¥${q.value.actualPayment}`},null,8,["right-text"]),o(D,{title:"订单编号","right-text":q.value.orderNo},null,8,["right-text"]),o(D,{title:"创建时间","right-text":q.value.createTime},null,8,["right-text"]),o(D,{title:"支付方式","right-text":F[q.value.paymentMethod]},null,8,["right-text"])])),_:1})])),_:1}),o($,{class:"notice-bar"},{default:u((()=>[10===q.value.status||q.value.countdown>0?(s(),l(J,{key:0,text:`请在 ${M(q.value.countdown)} 内完成支付，超时订单将取消`},null,8,["text"])):c("",!0)])),_:1}),o($,{class:"toolbar"},{default:u((()=>[10===q.value.status?(s(),r(d,{key:0},[o($,{class:"total-amount"},{default:u((()=>[n(" 需付款: "),o(I,{class:"number"},{default:u((()=>[n("¥"+i(q.value.actualPayment),1)])),_:1})])),_:1}),o($,{class:"buttons"},{default:u((()=>[o(K,{class:"uni-button minor"},{default:u((()=>[n("取消订单")])),_:1}),o(K,{class:"uni-button"},{default:u((()=>[n("立即支付")])),_:1})])),_:1})],64)):(s(),l($,{key:1,class:"buttons"},{default:u((()=>[o($,{class:"delete-botton"},{default:u((()=>[o(S,{size:"24",color:"#848484",type:"trash"}),o(I,null,{default:u((()=>[n("删除订单")])),_:1})])),_:1}),o(K,{class:"uni-button"},{default:u((()=>[n("再次购买")])),_:1})])),_:1}))])),_:1})])),_:1})])),_:1})}}},[["__scopeId","data-v-8a18ee7a"]]);export{S as default};

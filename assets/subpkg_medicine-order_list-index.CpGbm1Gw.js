import{_ as e}from"./custom-tabs.B0P6eduM.js";import{q as a,b as s,o as t,a as l,w as r,d as u,f as n,F as o,g as d,e as i,t as c,G as f,h as m,i as _,k as p,j as v,l as b,S as g,x as y,z as h,y as x}from"./index-SNMhby7L.js";import{r as j}from"./uni-app.es.CqodLWiA.js";import{_ as k}from"./uni-load-more.BOQrnhE1.js";import{a as w}from"./medcine.DvYZqmoQ.js";import{d as C}from"./fn.Db8hUwGN.js";import{_ as F}from"./_plugin-vue_export-helper.BCo6x5W8.js";import"./http.CqkQg3YM.js";const q=F({__name:"list",props:{status:{type:Number,default:10},label:{type:String,default:""}},setup(e){const y=e,h=a([]),x=a("more"),F=a(!1),q=a(1),I=a(!1),S=C((async()=>{x.value="loading",F.value=!1;const e=await w(y.status,q.value,5);if(1e4!==e.code)return uni.utils/toast(e.message);h.value=[...h.value,...e.data.rows],q.value++,q.value<=e.data.pageTotal?x.value="more":x.value="noMore",0===h.value.length&&(F.value=!0,x.value="noMore")}));async function z(){q.value=1,h.value=[],x.value="loading",I.value=!0,await S(),I.value=!1}function M(){"more"===x.value&&S()}return S(),(e,a)=>{const w=m,C=_,F=p,q=v,S=b,G=j(s("uni-load-more"),k),K=g;return t(),l(K,{"refresher-triggered":I.value,onRefresherrefresh:z,onScrolltolower:M,"refresher-enabled":"","refresher-background":"#f6f6f6",class:"uni-scroll-view","scroll-y":""},{default:r((()=>[u(C,{class:"order-list"},{default:r((()=>[(t(!0),n(o,null,d(h.value,((e,a)=>(t(),l(C,{key:e.id,class:"order-list-item"},{default:r((()=>[u(C,{class:"order-header"},{default:r((()=>[u(w,{class:"number"},{default:r((()=>[i("订单编号: "+c(e.id),1)])),_:2},1024),u(w,{class:"status"},{default:r((()=>[i(c(y.label),1)])),_:1})])),_:2},1024),u(q,{url:`/subpkg_medicine/order_detail/index?id=${e.id}`,"hover-class":"none",class:"order-body"},{default:r((()=>[(t(!0),n(o,null,d(e.medicines,(e=>(t(),l(C,{key:e.id,class:"medicine"},{default:r((()=>[u(F,{class:"medicine-cover",src:e.avatar,mode:"aspectFill"},null,8,["src"]),u(C,{class:"medicine-info"},{default:r((()=>[u(w,{class:"name"},{default:r((()=>[i(c(e.name),1)])),_:2},1024),u(w,{class:f([{symbol:1===e.prescriptionFlag},"unit"])},{default:r((()=>[i(c(e.specs),1)])),_:2},1032,["class"]),u(w,{class:"price"},{default:r((()=>[i("¥"+c(e.amount),1)])),_:2},1024)])),_:2},1024),u(C,{class:"quantity"},{default:r((()=>[i("x"+c(e.quantity),1)])),_:2},1024)])),_:2},1024)))),128))])),_:2},1032,["url"]),u(C,{class:"order-footer"},{default:r((()=>[u(C,{class:"total"},{default:r((()=>[i("共"+c(e.medicines.length)+"件商品 合计：¥"+c(e.actualPayment)+" （运费¥"+c(e.expressFee.toFixed(2))+"）",1)])),_:2},1024),u(C,{class:"buttons"},{default:r((()=>[u(S,{class:"uni-button minor"},{default:r((()=>[i("取消订单")])),_:1}),u(S,{class:"uni-button"},{default:r((()=>[i("继续支付")])),_:1})])),_:1})])),_:2},1024)])),_:2},1024)))),128)),u(G,{status:x.value,color:"#C3C3C5","icon-size":16,"content-text":{contentdown:"上拉显示更多",contentrefresh:"数据正在加载中",contentnomore:"没有更多数据了"}},null,8,["status"])])),_:1})])),_:1},8,["refresher-triggered"])}}},[["__scopeId","data-v-b9cf155a"]]),I=F({__name:"index",setup(i){const c=a([{label:"待支付",status:10,rendered:!0},{label:"待发货",status:11,rendered:!1},{label:"待收货",status:12,rendered:!1},{label:"已完成",status:13,rendered:!1},{label:"已取消",status:14,rendered:!1}]),f=a(0);function m(e){f.value=e.index,c.value[e.index].rendered=!0}return(a,i)=>{const p=j(s("custom-tabs"),e),v=_;return t(),l(v,{class:"medicine-page"},{default:r((()=>[u(v,{class:"order-status-tabs"},{default:r((()=>[u(p,{onClick:m,list:c.value},null,8,["list"])])),_:1}),(t(!0),n(o,null,d(c.value,((e,a)=>y((t(),l(v,{key:e.status},{default:r((()=>[e.rendered?(t(),l(q,{key:0,label:e.label,status:e.status},null,8,["label","status"])):h("",!0)])),_:2},1024)),[[x,f.value===a]]))),128))])),_:1})}}},[["__scopeId","data-v-b54851b1"]]);export{I as default};

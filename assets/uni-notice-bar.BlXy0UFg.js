import{a6 as e,b as t,o,a as i,w as n,z as a,d as l,J as s,n as r,e as c,t as u,h,i as d}from"./index-nfqmuTx8.js";import{_ as m}from"./uni-icons.CVREZnA1.js";import{r as p}from"./uni-app.es.l2AdP1v2.js";import{_ as b}from"./_plugin-vue_export-helper.BCo6x5W8.js";const y=b({name:"UniNoticeBar",emits:["click","getmore","close"],props:{text:{type:String,default:""},moreText:{type:String,default:""},backgroundColor:{type:String,default:"#FFF9EA"},speed:{type:Number,default:100},color:{type:String,default:"#FF9A43"},fontSize:{type:Number,default:14},moreColor:{type:String,default:"#FF9A43"},single:{type:[Boolean,String],default:!1},scrollable:{type:[Boolean,String],default:!1},showIcon:{type:[Boolean,String],default:!1},showGetMore:{type:[Boolean,String],default:!1},showClose:{type:[Boolean,String],default:!1}},data:()=>({textWidth:0,boxWidth:0,wrapWidth:"",webviewHide:!1,elId:`Uni_${Math.ceil(1e6*Math.random()).toString(36)}`,elIdBox:`Uni_${Math.ceil(1e6*Math.random()).toString(36)}`,show:!0,animationDuration:"none",animationPlayState:"paused",animationDelay:"0s"}),watch:{text:function(e,t){this.initSize()}},computed:{isShowGetMore(){return!0===this.showGetMore||"true"===this.showGetMore},isShowClose(){return!(!0!==this.showClose&&"true"!==this.showClose||!1!==this.showGetMore&&"false"!==this.showGetMore)}},mounted(){this.$nextTick((()=>{this.initSize()}))},methods:{initSize(){if(this.scrollable){let t=[],o=new Promise(((t,o)=>{e().in(this).select(`#${this.elId}`).boundingClientRect().exec((e=>{this.textWidth=e[0].width,t()}))})),i=new Promise(((t,o)=>{e().in(this).select(`#${this.elIdBox}`).boundingClientRect().exec((e=>{this.boxWidth=e[0].width,t()}))}));t.push(o),t.push(i),Promise.all(t).then((()=>{this.animationDuration=this.textWidth/this.speed+"s",this.animationDelay=`-${this.boxWidth/this.speed}s`,setTimeout((()=>{this.animationPlayState="running"}),1e3)}))}},loopAnimation(){},clickMore(){this.$emit("getmore")},close(){this.show=!1,this.$emit("close")},onClick(){this.$emit("click")}}},[["render",function(e,b,y,f,w,_){const S=p(t("uni-icons"),m),x=h,g=d;return w.show?(o(),i(g,{key:0,class:"uni-noticebar",style:r({backgroundColor:y.backgroundColor}),onClick:_.onClick},{default:n((()=>[!0===y.showIcon||"true"===y.showIcon?(o(),i(S,{key:0,class:"uni-noticebar-icon",type:"sound",color:y.color,size:1.5*y.fontSize},null,8,["color","size"])):a("",!0),l(g,{ref:"textBox",class:s(["uni-noticebar__content-wrapper",{"uni-noticebar__content-wrapper--scrollable":y.scrollable,"uni-noticebar__content-wrapper--single":!y.scrollable&&(y.single||y.moreText)}]),style:r({height:y.scrollable?1.5*y.fontSize+"px":"auto"})},{default:n((()=>[l(g,{id:w.elIdBox,class:s(["uni-noticebar__content",{"uni-noticebar__content--scrollable":y.scrollable,"uni-noticebar__content--single":!y.scrollable&&(y.single||y.moreText)}])},{default:n((()=>[l(x,{id:w.elId,ref:"animationEle",class:s(["uni-noticebar__content-text",{"uni-noticebar__content-text--scrollable":y.scrollable,"uni-noticebar__content-text--single":!y.scrollable&&(y.single||y.showGetMore)}]),style:r({color:y.color,fontSize:y.fontSize+"px",lineHeight:1.5*y.fontSize+"px",width:w.wrapWidth+"px",animationDuration:w.animationDuration,"-webkit-animationDuration":w.animationDuration,animationPlayState:w.webviewHide?"paused":w.animationPlayState,"-webkit-animationPlayState":w.webviewHide?"paused":w.animationPlayState,animationDelay:w.animationDelay,"-webkit-animationDelay":w.animationDelay})},{default:n((()=>[c(u(y.text),1)])),_:1},8,["id","class","style"])])),_:1},8,["id","class"])])),_:1},8,["class","style"]),_.isShowGetMore?(o(),i(g,{key:1,class:"uni-noticebar__more uni-cursor-point",onClick:_.clickMore},{default:n((()=>[y.moreText.length>0?(o(),i(x,{key:0,style:r({color:y.moreColor,fontSize:y.fontSize+"px"})},{default:n((()=>[c(u(y.moreText),1)])),_:1},8,["style"])):(o(),i(S,{key:1,type:"right",color:y.moreColor,size:1.1*y.fontSize},null,8,["color","size"]))])),_:1},8,["onClick"])):a("",!0),_.isShowClose?(o(),i(g,{key:2,class:"uni-noticebar-close uni-cursor-point"},{default:n((()=>[l(S,{type:"closeempty",color:y.color,size:1.1*y.fontSize,onClick:_.close},null,8,["color","size","onClick"])])),_:1})):a("",!0)])),_:1},8,["style","onClick"])):a("",!0)}],["__scopeId","data-v-a72af3d1"]]);export{y as _};
